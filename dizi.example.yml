# Dizi MCP Server Configuration Example
# 复制此文件为 dizi.yml 并根据需要修改

name: "my-mcp-server"
version: "1.0.0"
description: "My Custom MCP Server"

server:
  port: 8081

tools:
  # 内置工具示例
  - name: "echo"
    description: "Echo back the input message"
    type: "builtin"
    parameters:
      type: "object"
      properties:
        message:
          type: "string"
          description: "Message to echo back"
      required: ["message"]

  # 系统命令工具示例
  - name: "list_files"
    description: "List files in a directory"
    type: "command"
    command: "ls"
    args: ["-la", "{{path}}"]
    parameters:
      type: "object"
      properties:
        path:
          type: "string"
          description: "Directory path to list files from"
      required: ["path"]

  - name: "disk_usage"
    description: "Show disk usage for a path"
    type: "command"
    command: "du"
    args: ["-sh", "{{path}}"]
    parameters:
      type: "object"
      properties:
        path:
          type: "string"
          description: "Path to check disk usage for"
      required: ["path"]

  # 脚本工具示例
  - name: "current_time"
    description: "Get current date and time"
    type: "script"
    script: "date '+%Y-%m-%d %H:%M:%S'"

  - name: "git_status"
    description: "Show git repository status"
    type: "script"
    script: "cd {{path}} && git status --porcelain"
    parameters:
      type: "object"
      properties:
        path:
          type: "string"
          description: "Git repository path"
      required: ["path"]

  # Zephyr 开发工具示例
  - name: "zephyr_build"
    description: "编译当前 Zephyr 项目"
    type: "script"
    script: "source .venv/bin/activate && west build -p -s {{source_dir}} -b {{board}}"
    parameters:
      type: "object"
      properties:
        board:
          type: "string"
          description: "需要构建的 board identifier"
        source_dir:
          type: "string"
          description: "项目源码目录，如未指定则使用当前目录"
      required: ["board"]

  - name: "zephyr_flash"
    description: "将编译好的固件烧录到设备"
    type: "script"
    script: "source .venv/bin/activate && west flash"